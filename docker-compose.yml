services:
  mesh-suggester:
    build: .
    ports:
      - "7860:7860"
    volumes:
      # Bind-mount source files so code changes are picked up with
      # `docker compose restart` â€” no rebuild needed.
      # server/Model/ is intentionally NOT mounted so the image's
      # baked-in models are used.
      - ./app.py:/app/app.py
      - ./server/suggest_mesh_terms.py:/app/server/suggest_mesh_terms.py
      - ./server/suggest_with_other.py:/app/server/suggest_with_other.py
      - ./server/suggest_engine.py:/app/server/suggest_engine.py
      - ./server/query_parser.py:/app/server/query_parser.py
      - ./server/config.json:/app/server/config.json
      - ./server/tevatron:/app/server/tevatron
    environment:
      - GRADIO_SERVER_PORT=7860
